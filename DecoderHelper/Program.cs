// Licensed to Laurent Ellerbach under one or more agreements.
// Laurent Ellerbach licenses this file to you under the MIT license.

using LegoBluetooth;

Console.WriteLine("Hello, World!");

string toDecode =
@"<- 05-00-01-04-05
<- 05-00-01-03-05
<- 05-00-01-09-05
<- 05-00-01-08-05
<- 05-00-01-07-05
<- 05-00-01-0A-05
<- 05-00-01-0D-05
<- 05-00-01-02-02
<- 05-00-01-02-05
<- 05-00-01-05-02
<- 05-00-01-05-05
<- 05-00-01-06-02
<- 05-00-01-06-05
<- 05-00-01-01-02
<- 05-00-01-01-05
<- 05-00-42-00-02
<- 0B-00-01-0E-06-00-16-53-AE-EE-AC
-> 09-00-01-04-06-00-00-00-04
-> 09-00-01-03-06-17-00-00-20
-> 09-00-01-09-06-37-2E-32-63
-> 14-00-01-08-06-4C-45-47-4F-20-53-79-73-74-65-6D-20-41-2F-53
-> 06-00-01-07-06-00
-> 07-00-01-0A-06-00-03
-> 0F-00-04-00-01-27-00-00-00-00-10-00-00-00-10
-> 0F-00-04-01-01-27-00-00-00-00-10-00-00-00-10
-> 0F-00-04-02-01-25-00-00-00-00-10-00-00-00-10
-> 0F-00-04-03-01-26-00-00-00-00-10-00-00-00-10
-> 09-00-04-10-02-27-00-00-01
-> 0F-00-04-32-01-17-00-00-00-00-01-06-00-00-20
-> 0F-00-04-3A-01-28-00-00-00-00-10-00-00-01-02
-> 0F-00-04-3B-01-15-00-02-00-00-00-00-00-01-00
-> 0F-00-04-3C-01-14-00-02-00-00-00-00-00-01-00
-> 0F-00-04-46-01-42-00-01-00-00-00-00-00-00-10
-> 0B-00-01-0D-06-00-16-53-AE-EE-AB
-> 06-00-01-02-06-00
-> 06-00-01-02-06-00
-> 06-00-01-05-06-00
-> 06-00-01-05-06-00
-> 06-00-01-06-06-64
-> 06-00-01-06-06-64
-> 0D-00-01-01-06-4D-6F-76-65-20-48-75-62
-> 0D-00-01-01-06-4D-6F-76-65-20-48-75-62
-> 0A-00-47-00-00-01-00-00-00-00
-> 05-00-05-01-05
-> 06-00-01-05-06-CD";

var lines = toDecode.Split("\n");
foreach (var line in lines)
{
    Console.WriteLine(line);
    var ln = line.Substring(line.IndexOf(' ') + 1).Trim('\r');
    var hexValues = ln.Split('-');
    byte[] byteArray = new byte[hexValues.Length];
    for (int i = 0; i < hexValues.Length; i++)
    {
        byteArray[i] = Convert.ToByte(hexValues[i], 16);
    }

    var msg = CommonMessageHeader.Decode(byteArray);
    Console.WriteLine(msg);
}